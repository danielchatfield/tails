How does tails force dns resolution to go through tor?

Does tails achieve that through setting up all internet facing applications one by one, or through firewall rules?

Please explain
