The [[!wikipedia NX_bit]] helps enabling executable space protection.
Most 64bits x86 CPUs support this but Tails ships a -686 32 bit
kernel.

It seems Debian's -686 kernel does dot enable this, but the
-686-bigmem kernel does: `CONFIG_X86_PAE=y` is set in the
`debian/config/i386/none/config.686-bigmem` file, inside Debian's
svn://svn.debian.org/svn/kernel/dists/sid/linux-2.6, since PAE require
HIGHMEM64 to be enabled in the kernel config.

To use a PAE + NX-enabled kernel we need to build an image with
`--linux-flavours 686-bigmem` in `auto/config`.

Beware! according to
[Wikipedia](https://secure.wikimedia.org/wikipedia/en/wiki/NX_bit#Linux)
"the PAE mode that is required to use the NX bit causes pre-Pentium
Pro (including Pentium MMX) and Celeron M and Pentium M processors
without NX support to fail to boot". This is confirmed by a great
number of sources:

- [report](http://www.kernelcrash.com/blog/openvz-and-asterisk-and-pae/2009/02/03/)
  of a thinkpad t42 not booting with PAE support enabled
- <https://answers.launchpad.net/ubuntu/+source/linux/+question/33381>
- <https://bugs.launchpad.net/ubuntu/+source/xen-source/+bug/111434>
- the first generation Pentium M (Banias) and some second generation
  Pentium M (Dothan) has no PAE support [will not boot if PAE is
  required](https://groups.google.com/a/chromium.org/group/chromium-os-dev/browse_thread/thread/f30ae8e73e451048)

=> seems like we cannot default to use the bigmem kernel, and should
at least provide the non-bigmem one as an alternative choice in the
bootloader or wait for non-PAE systems to be rare enough so that we
can stop supporting them.

> I guess the decision to ship a highmem kernel, and thus to enable to choose a
> kernel at boot time requires to finish the [[boot menu todo item|todo/boot_menu]]. OTOH,
> Pentium M machines are still widely spread, as a lot of refurbished latops
> are shipping it. Not sure what to decide here. First solution seems the best
> but requires some more work... --bertagaz

=> [[!taglink todo/discuss]] what we want to do.

# Resources

- http://lists.debian.org/debian-devel/2010/11/msg00216.html
- [[!debbug 589579]]
