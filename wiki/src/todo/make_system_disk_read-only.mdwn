(Redirected from [[bugs/writable_system_disk:_belongs_to_floppy_group]].)

Tails is affected by [[!debbug 645466]].

[[!toc levels=2]]

The problem
===========

In short: the system USB disk and partition block devices (e.g.
`/dev/sdb*`) are writable by the default Live user, because they
belong to the `floppy` group.

This was fixed in Tails 0.12 (see
`config/chroot_local_includes/lib/live/config/998-permissions`) but
the bug has since reappeared so the bug is now reopened. Our `udev`
packages hasn't been updated since, but perhaps the `udev` init script
runs (or re-runs?) after `live-config` wheras it previously only ran
before?

Roadmap
=======

1. Fix write access to boot medium at the block device level:
   1. Review and merge `feature/bilibop`. 
   1. Re-enable the `the boot device has safe access rights` step in
      `features/usb_install.feature` of the automated test suite.

See also [bilibop](https://un.poivron.org/~quidame/bilibop_project/):
it's potential usefulness for Tails was discussed on the [[!debbug
675467 desc="ITP"]] and [[!debbug 675532 desc="RFS"]] bugs.

Our `feature/bilibop` branch installs bilibop-udev (0.4.11~quidame). It works fine and
makes the "the boot device has safe access rights" test pass.

[[!tag pending]]

Older notes
===========

This is being discussed in the *Help needed with branch
bugfix/writable_boot_media* thread on tails-dev.

Another solution, described below, was considered

home-made udev rules
--------------------

See branch `bugfix/writable_boot_media` for a new fix using `udev`.

> First review done, a bit more code is needed.

1. Fix write access to boot medium via udisks.
   a. Improve the `the boot device has safe access rights` step in
      `features/usb_install.feature` of the automated test suite to
      take this kind of write access into account.
   a. [[!taglink todo/research]] a solution. Hopefully bilibop knows
      how to do this, see README.Debian in the bilibop-rules package,
      especially the parts about `UDISKS_*`.
   a. research potential consequences on:
      * tails-persistence-setup
      * incremental updates

