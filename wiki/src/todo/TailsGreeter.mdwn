[[!meta title="tails-greeter"]]

This started as an implementation of custom [[todo/boot_menu]] for GDM3 as part of GSoC2011 project.

This page is the entry point to [[design
description|TailsGreeter/design]], [[installation instructions|TailsGreeter/install]]  and relevant
[[useful information|TailsGreeter/refs]].

Short summary of [[known issues|TailsGreeter/issues]] is worth inspecting too.

The [[project status
updates|TailsGreeter/blog]] and [[timeline|TailsGreeter/timeline]] pages were actively used during GSoC.

[[!toc levels=2]]

Overall state
==============

How it looks like
------------------

0. After GDM is started user is presented with language-chooser-widget and admin-password-widget.
0. Choosing language and layout immediately applied: if corresponding .po file is available then TailsGreeter is immediately translated.
0. After typing password and selecting 'next' logon performed and desktop shown with proper locale and layout. Logon without typing password will disable admin rights.

Requested options details
==============

Developers are encouraged to provide input for various options to be asked via boot-menu using following template:

Template
---------

Template for description of settings which are needed to be requested
via tails-greeter before logon:

1. name - just something we will use to point to during discussions
2. default value(s) - if any
3. effects - what exactly this option will trigger (e. g. write to some file(s), exec some processes, fire d-bus signals etc)
4. ui-hint - short description to be displayed for user in order to help him to figure out how to properly set this option
5. responsible dev - whom to ask for clarification if question arises 
6. dev's notes - overall description from dev's point of view (why do we need this option? what are the dependencies? how do we handle it now? how do we test implementation? any other comments?)

Language
--------

1. name: Language
2. default value: English
3. effects: 
   - setup locale for the TailsGreeter so that the user can understand the other
     choices;
   - generate the chosen locale;
   - setup locale for the session to be started;
   - maybe more: have a look at
     `config/binary_local-hooks/20-syslinux_i18n` in Tails main Git
     repository to see what parameters it passes to live-config
     (locales, keyboard-layouts) then grep the relevant variable names
     (`KEYBOARD_LAYOUT`, `LIVE_LOCALES`, `LIVE_TIMEZONE`) in
     live-config source to see what is currently done depending on the
     chosen language, and might thus need to be triggered by
     tails-greeter as well; while appealing, installing `locales-all`
     is not an option: it avoids the need to compile locales at
     runtime, but it increases the ISO size by 130MB+, which seems
     overkill since compiling one given locale takes roughly 3s on
     a quite old laptop.
    * locale generation: done with localedef (see [[design|TailsGreeter/design]] for details of the interface)
    * keyboard: layout is applied with the help of corresponding GDM d-bus signals.
    * console keyboard: live-config `015-keyboard-configuration`,
      `117-xserver-xorg` and `014-console-setup` scripts might be usable;
      need some envvars set.
    * timezone: pending a discussion + decision among ourselves; we don't
      know yet if we'll gonna set everybody to GMT, or set localized
      timezones.
    * Note: live-config scripts we'll run ourselves must not run on boot
      before we run them: these scripts are *not* idempotent
4. ui hint: Choose the language of your Tails session.
5. responsible dev:
6. dev's notes: This item should be really visible, probably on top of the
   TailsGreeter screen. More information can be found in
   [[todo/localization_at_runtime]].

Administrator password
----------------------

1. name: Administrator password
2. default value: none
3. effects: execute `set-user-password-and-locale` with `$TAILS_USER_PASSWORD` saved into temporary file. See [[design|TailsGreeter/design]] for details.
4. ui hint: (draft) enter here a password that will be asked to grant administrator
   rights. Leave this field blank to disable administrator rights.
5. responsible dev:
6. Related TODO item: [[todo/better_root_access_control]]

[[!tag todo/code]]
